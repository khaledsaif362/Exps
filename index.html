<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Date-wise Daily Expense Tracker (dd-mm-yyyy format)</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f3f7ff; margin: 40px; }
    h2 { text-align: center; color: #333; }
    .expense-container {
      max-width: 550px; margin: auto; background: #fff; padding: 20px;
      border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    input, button {
      padding: 10px; margin: 5px 0; border-radius: 6px;
      border: 1px solid #ccc; width: calc(100% - 20px); font-size: 16px;
    }
    input[type="date"] { width: 200px; }
    button {
      background: #4CAF50; color: white; cursor: pointer;
      width: 100%;
    }
    button:hover { background: #45a049; }
    table {
      width: 100%; margin-top: 15px; border-collapse: collapse;
    }
    th, td {
      background: #f9f9f9; padding: 10px; border-radius: 6px;
      border: 1px solid #ddd; text-align: center;
    }
    th { background: #e5eefd; }
    .total {
      font-weight: bold; margin-top: 15px; text-align: right;
      color: #222;
    }
  </style>
</head>
<body>
  <h2>Daily Expense Tracker</h2>
  <div class="expense-container">
    <input type="date" id="date" />
    <input type="text" id="desc" placeholder="Expense description" />
    <input type="number" id="amount" placeholder="Amount (₹)" />
    <button onclick="addExpense()">Add Expense</button>

    <table id="expenseTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Description</th>
          <th>Amount (₹)</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <div class="total">Total: ₹<span id="total">0</span></div>
  </div>
  <script>
    let total = 0;

    function formatDate(dateString) {
      // Checks for proper yyyy-mm-dd input and converts it to dd-mm-yyyy
      if (!dateString) return "";
      const parts = dateString.split("-");
      if (parts.length !== 3) return ""; // Invalid format
      const [year, month, day] = parts;
      // Basic checks for numeric strings
      if (
        year.length !== 4 ||
        month.length !== 2 ||
        day.length !== 2 ||
        isNaN(year) ||
        isNaN(month) ||
        isNaN(day)
      ) return "";
      return `${day}-${month}-${year}`;
    }

    function addExpense() {
      let dateInput = document.getElementById('date').value;
      let desc = document.getElementById('desc').value.trim();
      let amount = parseFloat(document.getElementById('amount').value);

      let formattedDate = formatDate(dateInput);

      // Validation for all fields, including proper date format
      if (!dateInput || !formattedDate) {
        alert("Please enter a valid date.");
        return;
      }
      if (desc === "") {
        alert("Please enter the expense description.");
        return;
      }
      if (isNaN(amount) || amount <= 0) {
        alert("Please enter a valid positive amount.");
        return;
      }

      total += amount;

      let table = document.getElementById('expenseTable').getElementsByTagName('tbody')[0];
      let row = table.insertRow();
      row.insertCell(0).innerText = formattedDate; // dd-mm-yyyy
      row.insertCell(1).innerText = desc;
      row.insertCell(2).innerText = amount.toFixed(2);

      document.getElementById('total').innerText = total.toFixed(2);

      document.getElementById('date').value = "";
      document.getElementById('desc').value = "";
      document.getElementById('amount').value = "";
    }
  </script>
</body>
</html>
